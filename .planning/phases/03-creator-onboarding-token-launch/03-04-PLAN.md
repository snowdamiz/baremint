---
phase: 03-creator-onboarding-token-launch
plan: 04
type: execute
wave: 4
depends_on: ["03-03"]
files_modified:
  - components/creator/kyc-badge.tsx
  - components/creator/vesting-timeline.tsx
  - app/(dashboard)/dashboard/creator/[id]/page.tsx
  - app/api/creator/[id]/route.ts
  - app/(dashboard)/dashboard/creator/page.tsx
autonomous: false

must_haves:
  truths:
    - "Viewers can see KYC verification badge next to creator name"
    - "Viewers can see vesting schedule timeline on creator profile"
    - "Vesting timeline shows cliff date, end date, and current progress"
    - "Anti-rug protections (KYC verified, vesting enforced) are visible before purchase"
    - "Creator can see 90-day cooldown status on their own profile/settings"
  artifacts:
    - path: "components/creator/kyc-badge.tsx"
      provides: "Verified checkmark badge component"
      min_lines: 15
    - path: "components/creator/vesting-timeline.tsx"
      provides: "Visual vesting schedule with milestones"
      min_lines: 40
    - path: "app/(dashboard)/dashboard/creator/[id]/page.tsx"
      provides: "Public creator profile page"
      min_lines: 40
    - path: "app/api/creator/[id]/route.ts"
      provides: "Public creator profile API"
      exports: ["GET"]
  key_links:
    - from: "app/(dashboard)/dashboard/creator/[id]/page.tsx"
      to: "/api/creator/[id]"
      via: "Server component fetch or direct DB query"
      pattern: "creatorProfile|creatorToken"
    - from: "components/creator/vesting-timeline.tsx"
      to: "creatorToken.launchedAt"
      via: "Calculate cliff/end dates from launch timestamp"
      pattern: "cliff|vesting|launchedAt"
    - from: "components/creator/kyc-badge.tsx"
      to: "creatorProfile.kycStatus"
      via: "Conditional render based on approved status"
      pattern: "kycStatus.*approved"
---

<objective>
Build the public-facing creator profile page with anti-rug transparency UI: KYC verification badge, vesting timeline with milestones, and cooldown information. Viewers see trust signals before purchasing tokens.

Purpose: SAFE-03 and SAFE-04 require transparent display of KYC status, vesting schedule, and anti-rug protections. This is the viewer-facing trust layer that makes the platform credible.
Output: KYC badge component, vesting timeline component, public creator profile page, cooldown display for creators.
</objective>

<execution_context>
@/Users/sn0w/.claude/get-shit-done/workflows/execute-plan.md
@/Users/sn0w/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-creator-onboarding-token-launch/03-CONTEXT.md
@.planning/phases/03-creator-onboarding-token-launch/03-RESEARCH.md
@.planning/phases/03-creator-onboarding-token-launch/03-01-SUMMARY.md
@.planning/phases/03-creator-onboarding-token-launch/03-03-SUMMARY.md
@lib/db/schema.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Trust signal components and public creator profile</name>
  <files>
    components/creator/kyc-badge.tsx
    components/creator/vesting-timeline.tsx
    app/api/creator/[id]/route.ts
    app/(dashboard)/dashboard/creator/[id]/page.tsx
    app/(dashboard)/dashboard/creator/page.tsx
  </files>
  <action>
1. Create components/creator/kyc-badge.tsx:
   - Small verified checkmark badge (Twitter/X blue check style)
   - Props: `{ verified: boolean, size?: 'sm' | 'md' }`
   - When verified=true: show blue circle with white checkmark SVG icon
   - When verified=false: render nothing (don't show "unverified")
   - Tooltip on hover: "Identity Verified via KYC"
   - Size sm: 16px, md: 20px. Default md.

2. Create components/creator/vesting-timeline.tsx:
   - Props: `{ launchedAt: Date, totalAllocation: number, tickerSymbol: string }`
   - Calculate milestones from launchedAt:
     - Launch date: launchedAt
     - Cliff end: launchedAt + 30 days
     - Vesting end: launchedAt + 90 days (30 cliff + 60 linear)
   - Visual timeline: horizontal bar with three markers (launch, cliff, end)
   - Current position indicator (animated dot or line) based on Date.now()
   - Status text:
     - Before cliff: "Cliff period - {X} days remaining until first claim"
     - During vesting: "Vesting active - {X}% vested, {Y} days remaining"
     - After vesting: "Fully vested"
   - Show allocation amount: "100,000,000 {ticker} (10% of supply)"
   - Note below: "Vesting is enforced on-chain and cannot be bypassed"
   - Use Tailwind for styling, match existing card/dashboard aesthetic

3. Create app/api/creator/[id]/route.ts:
   - GET handler (no auth required -- public profile)
   - Param [id] is the creatorProfile.id
   - Return: `{ profile: { displayName, bio, avatarUrl, bannerUrl, socials, kycStatus, createdAt }, token: { tokenName, tickerSymbol, imageUrl, mintAddress, launchedAt } | null }`
   - Join creatorProfile with creatorToken
   - Do NOT expose kycApplicantId, kycRejectionReason, or sensitive fields
   - Return 404 if profile not found

4. Create app/(dashboard)/dashboard/creator/[id]/page.tsx:
   - Server component that fetches creator data
   - Layout:
     - Banner image (full width, max-h-48)
     - Avatar (overlapping banner bottom, circle, 96px)
     - Display name + KYC badge (inline)
     - Bio text
     - Social links row (icons linking to Twitter, Instagram, YouTube, website -- only show if set)
   - Token section (if token exists):
     - Token card: name, ticker, image, description
     - Vesting timeline component
     - Trust signals box: "Anti-rug Protections" with checkmarks:
       - "Creator identity verified (KYC)" (if kycStatus === approved)
       - "10% allocation locked in on-chain vesting"
       - "90-day cooldown between token launches"
   - If no token: "This creator hasn't launched a token yet"

5. Update app/(dashboard)/dashboard/creator/page.tsx:
   - For creators who have already completed onboarding: show their own profile (similar to public view) with an "Edit Profile" option
   - Show 90-day cooldown status if they have a token: "You can launch a new token in {X} days" or "Cooldown expired -- you can launch a new token"
   - Cooldown info is PRIVATE (per CONTEXT.md) -- only shown to the creator themselves
   - Keep the wizard flow for new creators without a profile
  </action>
  <verify>
    - `npx tsc --noEmit` passes
    - `npm run build` succeeds
    - /dashboard/creator/[id] renders public profile with badge and vesting timeline
    - KYC badge shows checkmark only for verified creators
    - Vesting timeline calculates correct dates from launchedAt
    - Cooldown info visible only on creator's own page
  </verify>
  <done>
    Public creator profile page shows banner, avatar, bio, social links, KYC badge, token info, and vesting timeline. Anti-rug protections are clearly displayed. Cooldown info is private to creator. Trust signals are visible before any token purchase.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify complete creator onboarding flow</name>
  <what-built>Complete creator onboarding wizard (profile setup -> KYC -> token config -> review -> launch -> success) and public creator profile with trust signals (KYC badge, vesting timeline, anti-rug protections).</what-built>
  <how-to-verify>
    1. Visit http://localhost:3000/dashboard -- verify "Become a Creator" link/button exists
    2. Click through to /dashboard/creator -- wizard should load at profile step
    3. Fill in display name, bio, social links -- verify validation (name 2-50 chars)
    4. Upload avatar -- verify circle crop dialog opens, cropping works
    5. Upload banner -- verify wide rectangle crop dialog opens
    6. Submit profile step -- verify it advances to KYC step
    7. KYC step should show Sumsub widget (or config error without real creds -- expected)
    8. Skip to token config (if KYC can be manually set to approved in DB for testing)
    9. Configure token name, ticker, image, description
    10. Review step shows complete summary with vesting terms and warnings
    11. Visit /dashboard/creator/[profile-id] -- public profile renders with:
        - Banner + avatar + display name + KYC badge (if approved)
        - Vesting timeline (if token launched)
        - Anti-rug protections section
    12. Verify 90-day cooldown shows on creator's own profile page
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues found</resume-signal>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` -- no TypeScript errors
- `npm run build` -- production build succeeds
- Public profile page renders at /dashboard/creator/[id]
- KYC badge conditionally renders based on verification status
- Vesting timeline shows correct milestone dates
- Anti-rug protections clearly visible to viewers
- Cooldown info private to creator only
</verification>

<success_criteria>
- KYC badge shows verified checkmark for approved creators, nothing for others
- Vesting timeline visualizes 30-day cliff + 60-day linear vest with current progress
- Public creator profile displays banner, avatar, bio, socials, token info, trust signals
- Anti-rug protections section lists KYC, vesting, and cooldown enforcement
- 90-day cooldown visible only to the creator on their own page
- Human verification confirms the full end-to-end wizard flow works
</success_criteria>

<output>
After completion, create `.planning/phases/03-creator-onboarding-token-launch/03-04-SUMMARY.md`
</output>
